{
  "nodeInfo": {
    "nodeName": "创建档案",
    "nodeType": "HTTP"
  },
  "paramsConfig": [
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "patientCode",
      "sourceParamType": "STRING",
      "paramDesc": "体检编号",
      "targetParamKey": "patientCode",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "hisPatientId",
      "sourceParamType": "STRING",
      "paramDesc": "病人 ID",
      "targetParamKey": "patientId",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "patientName",
      "sourceParamType": "STRING",
      "paramDesc": "姓名",
      "targetParamKey": "name",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "age",
      "sourceParamType": "INTEGER",
      "paramDesc": "年龄",
      "targetParamKey": "age",
      "targetParamType": "INTEGER",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "birthday",
      "sourceParamType": "STRING",
      "paramDesc": "出生日期",
      "targetParamKey": "birthDate",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "cardType",
      "sourceParamType": "STRING",
      "paramDesc": "证件类型",
      "targetParamKey": "cardType",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "identitycard",
      "sourceParamType": "STRING",
      "paramDesc": "证件编号",
      "targetParamKey": "cardId",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "address",
      "sourceParamType": "STRING",
      "paramDesc": "家庭地址",
      "targetParamKey": "address",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "phone",
      "sourceParamType": "STRING",
      "paramDesc": "联系电话",
      "targetParamKey": "phone",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "marriage",
      "sourceParamType": "STRING",
      "paramDesc": "婚姻状况",
      "targetParamKey": "marital",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "EXPRESSION",
      "mappingSource": "RESPONSE",
      "mappingRule": "#data['marriage'] == null || #data['marriage'] == '' ) ? '未知' : (#data['marriage'] == '1' ? '未婚' : (#data['marriage'] == '2' ? '已婚' : '未知')",
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "nationName",
      "sourceParamType": "STRING",
      "paramDesc": "民族",
      "targetParamKey": "nation",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "country",
      "sourceParamType": "STRING",
      "paramDesc": "国籍",
      "targetParamKey": "country",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "education",
      "sourceParamType": "STRING",
      "paramDesc": "学历",
      "targetParamKey": "education",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "contactName",
      "sourceParamType": "STRING",
      "paramDesc": "联系人",
      "targetParamKey": "contactName",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "contactPhone",
      "sourceParamType": "STRING",
      "paramDesc": "联系人电话",
      "targetParamKey": "contactPhone",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "contactAddress",
      "sourceParamType": "STRING",
      "paramDesc": "联系人地址",
      "targetParamKey": "contactAddress",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "hisOrgId",
      "sourceParamType": "STRING",
      "paramDesc": "合约单位 ID",
      "targetParamKey": "orgId",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "orgName",
      "sourceParamType": "STRING",
      "paramDesc": "合约单位名称",
      "targetParamKey": "orgName",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    },
    {
      "processType": "PRE_PROCESS",
      "sourceParamKey": "sex",
      "sourceParamType": "STRING",
      "paramDesc": "性别（0/null/3→未知，1→男，2→女）",
      "targetParamKey": "sex",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "EXPRESSION",
      "mappingSource": "RESPONSE",
      "mappingRule": "#data['sex'] == null || #data['sex'] == '' ) ? '未知' : (#data['sex'] == '1' ? '未婚' : (#data['sex'] == '2' ? '已婚' : '未知')",
      "childParam": null
    },
    {
      "processType": "POST_PROCESS",
      "sourceParamKey": "returnCode",
      "sourceParamType": "STRING",
      "paramDesc": "响应状态码转换：1->200，其他->-1",
      "targetParamKey": "code",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "EXPRESSION",
      "mappingSource": "RESPONSE",
      "mappingRule": "#data == \"1\" ? \"200\" : \"-1\"",
      "childParam": null
    },
    {
      "processType": "POST_PROCESS",
      "sourceParamKey": "data",
      "sourceParamType": "OBJECT",
      "paramDesc": null,
      "targetParamKey": "rsp",
      "targetParamType": "OBJECT",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": [
        {
          "processType": "POST_PROCESS",
          "sourceParamKey": "patientId",
          "sourceParamType": "STRING",
          "paramDesc": null,
          "targetParamKey": "outPatientCode",
          "targetParamType": "STRING",
          "sort": 1,
          "mappingType": "NAME",
          "mappingSource": "RESPONSE",
          "mappingRule": null,
          "childParam": null
        },
        {
          "processType": "POST_PROCESS",
          "sourceParamKey": "clinicId",
          "sourceParamType": "STRING",
          "paramDesc": null,
          "targetParamKey": "visitNo",
          "targetParamType": "STRING",
          "sort": 1,
          "mappingType": "NAME",
          "mappingSource": "RESPONSE",
          "mappingRule": null,
          "childParam": null
        }
      ]
    },
    {
      "processType": "POST_PROCESS",
      "sourceParamKey": "errorMessage",
      "sourceParamType": "STRING",
      "paramDesc": null,
      "targetParamKey": "message",
      "targetParamType": "STRING",
      "sort": 1,
      "mappingType": "NAME",
      "mappingSource": "RESPONSE",
      "mappingRule": null,
      "childParam": null
    }
  ]
}